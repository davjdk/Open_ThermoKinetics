# Этап 1: Анализ требований и описание задачи

## Описание задачи

Необходимо разработать новую стратегию детектирования мета-операций **BaseSignalsMetaBurst** для системы агрегированного логирования операций. Данная стратегия предназначена для выявления "всплесков" подопераций, инициированных модулем `base_signals`, происходящих в пределах одного временного окна (по умолчанию 100 мс). Это позволит группировать серию быстрых вызовов из `base_signals` в одну логическую мета-операцию, повышая читаемость логов и облегчая анализ паттернов работы системы.

## Ключевые требования к стратегии BaseSignalsMetaBurst

### 1. Фокус на base_signals
* **Фокус на base_signals:** Стратегия применяется **только** к тем подоперациям, у которых атрибут `source_module` указывает на `base_signals` (т.е. операции, инициированные модулем base_signals). Подоперации из других модулей не должны образовывать мета-операции по этой стратегии.

### 2. Временное кластерирование
* **Временное кластерирование:** Подоперации `base_signals`, произошедшие "залпом" – в пределах заданного интервала времени – должны объединяться в одну мета-операцию (кластер). Время окна по умолчанию составляет **100 мс**, значение должно быть настраиваемым.

### 3. Игнорирование шума
* **Игнорирование шума:** Операции, не относящиеся к `base_signals`, но попавшие в заданное временное окно между `base_signals`-операциями, не включаются непосредственно в мета-операцию, но помечаются как **шум**. Необходимо фиксировать информацию о таких "шумовых" подоперациях, чтобы при выводе логов дать понять, что в интервале кластера происходили и посторонние действия.

### 4. Резюме мета-операции
* **Резюме мета-операции:** Для каждой обнаруженной мета-операции типа BaseSignalsMetaBurst должен формироваться **сводный описание (summary)**, включающее:
  * Описание актора (инициатора), если он определён для данного набора операций (например, имя пользователя или идентификатор процесса, связанный с `base_signals` вызовами).
  * Информацию о "шуме" – сколько и какие посторонние подоперации произошли в окне кластеризации.
  * Общую продолжительность мета-операции (разница между началом первой и завершением последней `base_signals`-подоперации в кластере).

### 5. Возможность отключения
* **Возможность отключения:** Стратегия должна быть полностью отключаемой через конфигурацию (флаг `enabled`), не влияя на сбор и вывод логов при выключенном состоянии.

### 6. Интеграция с системой мета-операций
* **Интеграция с системой мета-операций:** Новая стратегия должна быть встроена в существующую систему постфактум-детекции мета-операций, координируемую классом `MetaOperationDetector`. Она дополняет другие эвристики (такие как TimeWindow, TargetCluster и др.) и не нарушает их работу.

### 7. Поддержка форматов вывода
* **Поддержка форматов вывода:** Реализованная стратегия должна поддерживаться текущим форматтером логов в режимах **compact** и **detailed** (а также других режимах, если предусмотрены, например table или JSON). Это означает, что мета-операции BaseSignalsMetaBurst корректно отображаются как в сжатом текстовом виде, так и в подробном, согласуясь с настройками форматирования (например, параметрами `mode`, `show_individual_operations`, `meta_operation_summary` в конфигурации).

## Цели этапа

1. **Определить функциональные требования** - четко сформулировать, что должна делать стратегия
2. **Определить нефункциональные требования** - производительность, отказоустойчивость, совместимость
3. **Проанализировать существующую архитектуру** - понять, как новая стратегия интегрируется в систему
4. **Определить ограничения и предположения** - технические и бизнес-ограничения
5. **Создать базовые сценарии использования** - основные use cases для стратегии

## Результаты этапа

- [ ] Документированы все функциональные требования
- [ ] Определены нефункциональные требования (производительность, надежность)
- [ ] Проанализирована совместимость с существующими стратегиями
- [ ] Созданы базовые сценарии использования
- [ ] Определены критерии успеха для стратегии
- [ ] Документированы предположения и ограничения

## Следующий этап

**Этап 2: Архитектура и проектирование** - разработка технической архитектуры стратегии, определение классов и интерфейсов.
